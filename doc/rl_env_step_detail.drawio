<?xml version='1.0' encoding='utf-8'?>
<mxfile host="app.diagrams.net"><diagram id="STEP" name="step() detail"><mxGraphModel dx="1000" dy="1000" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1"><root><mxCell id="0" /><mxCell id="1" parent="0" /><mxCell id="2" value="Receive action a_t" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1"><mxGeometry x="60" y="20" width="140" height="60" as="geometry" /></mxCell><mxCell id="3" value="step_counter +=1&amp;amp;#xa;action_stats[a_t] +=1" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="60" y="110" width="220" height="70" as="geometry" /></mxCell><mxCell id="4" value="Process action" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="60" y="200" width="160" height="90" as="geometry" /></mxCell><mxCell id="5" value="Stop:&amp;amp;#xa;energy[current_speaker]=0&amp;amp;#xa;current_speaker=-1" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="60" y="290" width="220" height="70" as="geometry" /></mxCell><mxCell id="6" value="Stare_at target:&amp;amp;#xa;effect=0.2*(1-imbalance)&amp;amp;#xa;energy[target]+=effect" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="60" y="380" width="220" height="70" as="geometry" /></mxCell><mxCell id="7" value="Encourage target (if no speaker):&amp;amp;#xa;effect=0.3*(1-imbalance)&amp;amp;#xa;energy[target]+=effect" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="60" y="470" width="220" height="70" as="geometry" /></mxCell><mxCell id="8" value="Wait: no energy change" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="60" y="560" width="220" height="70" as="geometry" /></mxCell><mxCell id="9" value="Energy dynamics per agent i" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="60" y="650" width="220" height="70" as="geometry" /></mxCell><mxCell id="10" value="Select / update current speaker" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="60" y="740" width="160" height="90" as="geometry" /></mxCell><mxCell id="11" value="If speaker, phonemes[speaker]+=phonemes_per_step" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="60" y="830" width="220" height="70" as="geometry" /></mxCell><mxCell id="12" value="Reward: 1 - Gini&amp;amp;#xa;+ shaping (+0.2 new speaker, -0.1 long turn)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="60" y="920" width="220" height="70" as="geometry" /></mxCell><mxCell id="13" value="truncated = step_counter &amp;gt;= max_steps" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="60" y="1010" width="160" height="90" as="geometry" /></mxCell><mxCell id="14" value="obs = _get_obs()&amp;amp;#xa;info = {...}" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="60" y="1100" width="220" height="70" as="geometry" /></mxCell><mxCell id="15" value="Return (obs, reward, terminated, truncated, info)" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1"><mxGeometry x="60" y="1190" width="140" height="60" as="geometry" /></mxCell><mxCell id="100" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" source="2" target="3" parent="1" value=""><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="101" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" source="3" target="4" parent="1" value=""><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="102" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" source="4" target="5" parent="1" value="a_t == 1 &amp;amp; speaker != -1"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="103" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" source="4" target="6" parent="1" value="a_t in 2..4"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="104" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" source="4" target="7" parent="1" value="a_t in 5..7 &amp;amp; speaker == -1"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="105" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" source="4" target="8" parent="1" value="a_t == 0 or else"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="106" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" source="5" target="9" parent="1" value=""><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="107" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" source="6" target="9" parent="1" value=""><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="108" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" source="7" target="9" parent="1" value=""><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="109" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" source="8" target="9" parent="1" value=""><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="110" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" source="9" target="10" parent="1" value=""><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="111" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" source="10" target="11" parent="1" value=""><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="112" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" source="11" target="12" parent="1" value=""><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="113" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" source="12" target="13" parent="1" value=""><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="114" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" source="13" target="14" parent="1" value=""><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="115" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;" edge="1" source="14" target="15" parent="1" value=""><mxGeometry relative="1" as="geometry" /></mxCell></root></mxGraphModel></diagram></mxfile>